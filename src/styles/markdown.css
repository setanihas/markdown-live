/* ── Markdown Preview ─────────────────────────────────────── */
.md-preview {
  font-family: var(--font-serif);
  font-size: 15.5px;
  line-height: 1.85;
  color: var(--text-1);
  overflow-wrap: break-word;
  word-break: break-word;
}

.md-preview > * + * { margin-top: 1.25em; }

/* Headings */
.md-preview h1,
.md-preview h2,
.md-preview h3,
.md-preview h4,
.md-preview h5,
.md-preview h6 {
  font-family: var(--font-sans);
  font-weight: 700;
  line-height: 1.25;
  letter-spacing: -0.02em;
  color: var(--text-1);
  margin-top: 2em;
  margin-bottom: 0.6em;
}

.md-preview h1 { font-size: 2em; font-weight: 800; }
.md-preview h2 { font-size: 1.5em; padding-bottom: 0.3em; border-bottom: 1px solid var(--border); }
.md-preview h3 { font-size: 1.2em; }
.md-preview h4 { font-size: 1em; font-weight: 600; }
.md-preview h5 { font-size: 0.9em; font-weight: 600; color: var(--text-2); }
.md-preview h6 { font-size: 0.85em; font-weight: 600; color: var(--text-3); }

.md-preview h1 a,
.md-preview h2 a,
.md-preview h3 a,
.md-preview h4 a { color: inherit; text-decoration: none; }

/* Paragraph */
.md-preview p { margin: 0; }

/* Links */
.md-preview a {
  color: var(--accent);
  text-decoration: underline;
  text-underline-offset: 3px;
  transition: opacity 0.15s;
}
.md-preview a:hover { opacity: 0.75; }

/* Inline code */
.md-preview code:not(pre code) {
  font-family: var(--font-mono);
  font-size: 0.82em;
  background: var(--hljs-bg);
  border: 1px solid var(--hljs-border);
  border-radius: 4px;
  padding: 0.15em 0.45em;
  color: var(--accent);
  white-space: nowrap;
}

/* Code blocks */
.md-preview pre {
  background: var(--hljs-bg) !important;
  border: 1px solid var(--hljs-border);
  border-radius: 8px;
  overflow: auto;
  margin: 1.5em 0;
}

.md-preview pre code {
  font-family: var(--font-mono);
  font-size: 0.8em;
  line-height: 1.7;
  display: block;
  padding: 1.25em 1.5em;
  background: transparent !important;
  white-space: pre;
  tab-size: 2;
}

/* Blockquote */
.md-preview blockquote {
  border-left: 3px solid var(--accent);
  padding: 0.5em 1.25em;
  margin: 1.5em 0;
  background: var(--accent-dim);
  border-radius: 0 6px 6px 0;
  color: var(--text-2);
  font-style: italic;
}
.md-preview blockquote > p { margin: 0; }

/* Lists */
.md-preview ul,
.md-preview ol { padding-left: 1.6em; margin: 0.5em 0; }
.md-preview li { margin: 0.3em 0; }
.md-preview ul > li { list-style-type: disc; }
.md-preview ol > li { list-style-type: decimal; }
.md-preview li > ul, .md-preview li > ol { margin: 0.2em 0; }

/* Task lists */
.md-preview ul.contains-task-list { list-style: none; padding-left: 0.5em; }
.md-preview .task-list-item { display: flex; align-items: flex-start; gap: 0.5em; }
.md-preview .task-list-item input[type="checkbox"] {
  width: 15px; height: 15px;
  margin-top: 0.3em;
  accent-color: var(--accent);
  flex-shrink: 0;
}

/* HR */
.md-preview hr {
  border: none;
  border-top: 1px solid var(--border-2);
  margin: 2.5em 0;
}

/* Tables */
.md-preview table {
  width: 100%;
  border-collapse: collapse;
  font-family: var(--font-sans);
  font-size: 0.9em;
  margin: 1.5em 0;
  border-radius: 8px;
  border: 1px solid var(--border);
  overflow: hidden;
}
.md-preview thead { background: var(--surface-card); }
.md-preview th {
  padding: 0.7em 1em;
  text-align: left;
  font-weight: 600;
  font-size: 0.8em;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  color: var(--text-2);
  border-bottom: 1px solid var(--border-2);
}
.md-preview td {
  padding: 0.65em 1em;
  border-bottom: 1px solid var(--border);
}
.md-preview tr:last-child td { border-bottom: none; }
.md-preview tbody tr:hover { background: var(--hover-bg); }
.md-preview tr:nth-child(even) { background: var(--surface-hover); }

/* Images */
.md-preview img {
  max-width: 100%;
  height: auto;
  border-radius: 8px;
  display: block;
  margin: 1.5em auto;
  border: 1px solid var(--border);
}

/* Details */
.md-preview details {
  border: 1px solid var(--border);
  border-radius: 8px;
  padding: 0.75em 1em;
  background: var(--surface-card);
}
.md-preview summary {
  font-family: var(--font-sans);
  font-weight: 600;
  cursor: pointer;
  color: var(--text-1);
}
.md-preview summary:hover { color: var(--accent); }

/* ── Highlight.js tokens ──────────────────────────────────── */
[data-theme="dark"] .hljs            { color: #cdd6f4; }
[data-theme="dark"] .hljs-keyword    { color: #cba6f7; }
[data-theme="dark"] .hljs-built_in   { color: #89b4fa; }
[data-theme="dark"] .hljs-type       { color: #89dceb; }
[data-theme="dark"] .hljs-literal    { color: #fab387; }
[data-theme="dark"] .hljs-number     { color: #fab387; }
[data-theme="dark"] .hljs-operator   { color: #89dceb; }
[data-theme="dark"] .hljs-string     { color: #a6e3a1; }
[data-theme="dark"] .hljs-comment    { color: #6c7086; font-style: italic; }
[data-theme="dark"] .hljs-tag        { color: #f38ba8; }
[data-theme="dark"] .hljs-attr       { color: #89b4fa; }
[data-theme="dark"] .hljs-variable   { color: #f2cdcd; }
[data-theme="dark"] .hljs-function   { color: #89b4fa; }
[data-theme="dark"] .hljs-title      { color: #89b4fa; }
[data-theme="dark"] .hljs-params     { color: #cdd6f4; }
[data-theme="dark"] .hljs-meta       { color: #fab387; }
[data-theme="dark"] .hljs-emphasis   { font-style: italic; }
[data-theme="dark"] .hljs-strong     { font-weight: bold; }

[data-theme="light"] .hljs           { color: #383a42; }
[data-theme="light"] .hljs-keyword   { color: #a626a4; }
[data-theme="light"] .hljs-built_in  { color: #4078f2; }
[data-theme="light"] .hljs-type      { color: #0097fb; }
[data-theme="light"] .hljs-literal   { color: #986801; }
[data-theme="light"] .hljs-number    { color: #986801; }
[data-theme="light"] .hljs-operator  { color: #0097fb; }
[data-theme="light"] .hljs-string    { color: #50a14f; }
[data-theme="light"] .hljs-comment   { color: #a0a1a7; font-style: italic; }
[data-theme="light"] .hljs-tag       { color: #e45649; }
[data-theme="light"] .hljs-attr      { color: #4078f2; }
[data-theme="light"] .hljs-variable  { color: #e45649; }
[data-theme="light"] .hljs-function  { color: #4078f2; }
[data-theme="light"] .hljs-title     { color: #4078f2; }
[data-theme="light"] .hljs-meta      { color: #986801; }
